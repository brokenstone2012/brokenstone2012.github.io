<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>linux笔记01</title>
      <link href="/2024/09/19/linux%E7%AC%94%E8%AE%B001/"/>
      <url>/2024/09/19/linux%E7%AC%94%E8%AE%B001/</url>
      
        <content type="html"><![CDATA[<h1 id="安装zerotier"><a href="#安装zerotier" class="headerlink" title="安装zerotier"></a>安装zerotier</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">curl -s https://install.zerotier.com | bash</span><br><span class="line">zerotier-cli join 8286ac0e47e50f88</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nohup /root/server_linux_amd64 -c /root/kcptun.json 2&gt;&amp;1 &amp;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rc-update add supervisord sysinit</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rc-update add supervisord sysinit</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">yum install epel-release</span><br><span class="line">yum install -y supervisor</span><br><span class="line">systemctl enable supervisord # 开机自启动</span><br><span class="line">systemctl start supervisord # 启动supervisord服务</span><br></pre></td></tr></table></figure><h1 id="查看supervisord服务状态"><a href="#查看supervisord服务状态" class="headerlink" title="查看supervisord服务状态"></a>查看supervisord服务状态</h1><p><code>systemctl status supervisord</code></p><h1 id="查看是否存在supervisord进程"><a href="#查看是否存在supervisord进程" class="headerlink" title="查看是否存在supervisord进程"></a>查看是否存在supervisord进程</h1><p><code>ps -ef|grep supervisord</code></p><p>systemctl restart sing-box</p><p>启动一个单端口 Brook协议模式，监听端口为 2333，密码为 doub.io。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nohup ./brook server -l :17519 -p &quot;a588188&quot; &gt; /dev/null 2&gt;&amp;1 &amp;</span><br></pre></td></tr></table></figure><p>如果你使用 Brook的新版混淆协议[server]速度慢，那么可以尝试旧版混淆协议[streamserver]（注意：此混淆协议可能会速度降低，仅适合使用新版协议慢的）</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">nohup ./brook streamserver -l :2333 -p &quot;a588188&quot; &gt; /dev/null 2&gt;&amp;1 &amp;</span><br><span class="line"></span><br><span class="line">wsserver</span><br><span class="line">nohup ./brook wsserver -l :17519 -p &quot;a588188&quot; &gt; /dev/null 2&gt;&amp;1 &amp;</span><br><span class="line">nohup ./brook wssserver --domainaddress jp.gcstw.tk:443 -p &quot;a588188&quot; &gt; /dev/null 2&gt;&amp;1 &amp;</span><br></pre></td></tr></table></figure><h1 id="nat配置规则"><a href="#nat配置规则" class="headerlink" title="nat配置规则"></a>nat配置规则</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">iptables -t nat -A POSTROUTING -s 10.8.0.0/24 -o eth0 -j MASQUERADE</span><br><span class="line">iptables-save</span><br><span class="line">iptables -L -n -t nat</span><br></pre></td></tr></table></figure><h1 id="删除nat配置规则"><a href="#删除nat配置规则" class="headerlink" title="删除nat配置规则"></a>删除nat配置规则</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iptables -t nat -D POSTROUTING 1</span><br></pre></td></tr></table></figure><h1 id="添加nat配置规则"><a href="#添加nat配置规则" class="headerlink" title="添加nat配置规则"></a>添加nat配置规则</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">iptables -t nat -A PREROUTING -i eth0 -p udp --dport 13002:13020 -j DNAT --to-destination :17502</span><br><span class="line">ip6tables -t nat -A PREROUTING -i venet0 -p udp --dport 14257:14999 -j DNAT --to-destination :14256</span><br><span class="line"></span><br><span class="line">ip6tables -t nat -D PREROUTING -i venet0 -p tcp --dport 13030:13099 -j DNAT --to-destination :6443</span><br><span class="line">ip6tables -t nat -D PREROUTING -i venet0 -p udp --dport 13030:13099 -j DNAT --to-destination :6443</span><br><span class="line"></span><br><span class="line">echo 1 &gt; /proc/sys/net/ipv4/ip_forward</span><br><span class="line">venet0</span><br></pre></td></tr></table></figure><h1 id="检查VPS的TUN是否开启-OpenVZ虚拟化的服务器很可能默认关闭-。"><a href="#检查VPS的TUN是否开启-OpenVZ虚拟化的服务器很可能默认关闭-。" class="headerlink" title="检查VPS的TUN是否开启(OpenVZ虚拟化的服务器很可能默认关闭)。"></a>检查VPS的TUN是否开启(OpenVZ虚拟化的服务器很可能默认关闭)。</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">cat /dev/net/tun</span><br><span class="line">如果TUN开启的话返回是：</span><br><span class="line"></span><br><span class="line">cat: /dev/net/tun: File descriptor in bad state</span><br><span class="line"></span><br><span class="line">mkdir -p /dev/net</span><br><span class="line">mknod /dev/net/tun c 10 200</span><br><span class="line">chmod 755 /dev/net</span><br><span class="line">chmod 666 /dev/net/tun</span><br></pre></td></tr></table></figure><h1 id="Rinetd模式（不需要开启TUN-TAP）"><a href="#Rinetd模式（不需要开启TUN-TAP）" class="headerlink" title="Rinetd模式（不需要开启TUN&#x2F;TAP）"></a>Rinetd模式（不需要开启TUN&#x2F;TAP）</h1><p>Debian or Ubuntu系统 适用于单网卡（单IP）服务器：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">wget https://github.com/tcp-nanqinlang/lkl-rinetd/releases/download/1.1.0/tcp_nanqinlang-rinetd-debianorubuntu.sh</span><br><span class="line">bash tcp_nanqinlang-rinetd-debianorubuntu.sh</span><br></pre></td></tr></table></figure><p>如果提示only support OpenVZ !，则使用下面这个脚本</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">wget https://github.com/tcp-nanqinlang/lkl-rinetd/releases/download/1.1.0-nocheckvirt/tcp_nanqinlang-rinetd-debianorubuntu-nocheckvirt.sh</span><br><span class="line">bash tcp_nanqinlang-rinetd-debianorubuntu-nocheckvirt.sh</span><br></pre></td></tr></table></figure><p>适用于多网卡（多IP）服务器，会为所有网卡（所有IP）提供加速：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">wget https://github.com/tcp-nanqinlang/lkl-rinetd/releases/download/1.1.0/tcp_nanqinlang-rinetd-debianorubuntu-multiNIC.sh</span><br><span class="line">bash tcp_nanqinlang-rinetd-debianorubuntu-multiNIC.sh</span><br></pre></td></tr></table></figure><p>如果提示only support OpenVZ !，则使用下面这个脚本</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">wget https://github.com/tcp-nanqinlang/lkl-rinetd/releases/download/1.1.0-nocheckvirt/tcp_nanqinlang-rinetd-debianorubuntu-nocheckvirt-multiNIC.sh</span><br><span class="line">bash tcp_nanqinlang-rinetd-debianorubuntu-nocheckvirt-multiNIC.sh</span><br></pre></td></tr></table></figure><p>CentOS 7系统</p><h1 id="和上面一样，也分单网卡和多网卡版本"><a href="#和上面一样，也分单网卡和多网卡版本" class="headerlink" title="和上面一样，也分单网卡和多网卡版本"></a>和上面一样，也分单网卡和多网卡版本</h1><p>单网卡</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">wget https://github.com/tcp-nanqinlang/lkl-rinetd/releases/download/1.1.0/tcp_nanqinlang-rinetd-centos.sh</span><br><span class="line">bash tcp_nanqinlang-rinetd-centos.sh</span><br><span class="line">#如果提示only support OpenVZ !，则使用下面这个脚本</span><br><span class="line">wget https://github.com/tcp-nanqinlang/lkl-rinetd/releases/download/1.1.0-nocheckvirt/tcp_nanqinlang-rinetd-centos-nocheckvirt.sh</span><br><span class="line">bash tcp_nanqinlang-rinetd-centos-nocheckvirt.sh</span><br></pre></td></tr></table></figure><p>多网卡</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">wget https://github.com/tcp-nanqinlang/lkl-rinetd/releases/download/1.1.0/tcp_nanqinlang-rinetd-centos.sh</span><br><span class="line">bash tcp_nanqinlang-rinetd-centos.sh</span><br><span class="line">#如果提示only support OpenVZ !，则使用下面这个脚本</span><br><span class="line">wget https://github.com/tcp-nanqinlang/lkl-rinetd/releases/download/1.1.0-nocheckvirt/tcp_nanqinlang-rinetd-debianorubuntu-nocheckvirt-multiNIC.sh</span><br><span class="line">bash tcp_nanqinlang-rinetd-debianorubuntu-nocheckvirt-multiNIC.sh</span><br></pre></td></tr></table></figure><h3 id="lkl模式（需要开启TUN-TAP）"><a href="#lkl模式（需要开启TUN-TAP）" class="headerlink" title="lkl模式（需要开启TUN&#x2F;TAP）"></a>lkl模式（需要开启TUN&#x2F;TAP）</h3><p>BBR魔改版  Debian&#x2F;Ubuntu：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">wget https://github.com/tcp-nanqinlang/lkl-haproxy/releases/download/1.1.1/tcp_nanqinlang-haproxy-debian.sh</span><br><span class="line">bash tcp_nanqinlang-haproxy-debian.sh</span><br><span class="line">CentOS：</span><br><span class="line"></span><br><span class="line">wget https://github.com/tcp-nanqinlang/lkl-haproxy/releases/download/1.1.1/tcp_nanqinlang-haproxy-centos.sh</span><br><span class="line">bash tcp_nanqinlang-haproxy-centos.sh</span><br><span class="line">BBR-plus</span><br><span class="line"></span><br><span class="line">wget --no-cache -O lkl-haproxy.sh https://github.com/mzz2017/lkl-haproxy/raw/master/lkl-haproxy.sh &amp;&amp; bash lkl-haproxy.sh</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -dt --name ssserver -p 6443:6443 -p 6500:6500/udp mritd/shadowsocks -m &quot;ss-server&quot; -s &quot;-s 0.0.0.0 -p 6443 -m chacha20-ietf-poly1305 -k W6ytgvZNKcKtIlEPQQn6Yg==&quot; -x -e &quot;kcpserver&quot; -k &quot;-t 127.0.0.1:6443 -l :6500 -mode fast3&quot;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 编程 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>pug语法</title>
      <link href="/2024/09/19/pug%E8%AF%AD%E6%B3%95/"/>
      <url>/2024/09/19/pug%E8%AF%AD%E6%B3%95/</url>
      
        <content type="html"><![CDATA[<p><code>pug</code>原名<code>jade</code>,因版权问题更名为<code>pug</code>,即哈巴狗。与<code>hexo</code>默认模块<code>ejs</code>一样，<code>pug</code>也是一个模板引擎，可用于快速的网站开发，当然也可以用于静态博客网站的设计。本站点现时所用主题<code>manupassant</code>也使用了<code>pug</code>。</p><p>本文针对<code>Hexo</code>中使用<code>pug</code>的情况为例，说明其基本语法。</p><h2 id="安装"><a href="#安装" class="headerlink" title="安装#"></a>安装<a href="#1927677622">#</a></h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># common install</span><br><span class="line">npm install pug</span><br><span class="line"></span><br><span class="line"># install for hexo blog</span><br><span class="line">npm install hexo\-renderer-pug --save</span><br></pre></td></tr></table></figure><h2 id="语法"><a href="#语法" class="headerlink" title="语法#"></a>语法<a href="#3395789642">#</a></h2><p><code>pug</code>不同于<code>html</code>，前者不需要标签的开和闭，如<code>html</code>的<code>&lt;p&gt;Demo&lt;/p&gt;</code>，在<code>pug</code>使用<code>p Demo</code>即可。</p><h3 id="缩进"><a href="#缩进" class="headerlink" title="缩进#"></a>缩进<a href="#657568236">#</a></h3><p><code>pug</code>对空格敏感，有点类似<code>python</code>对制表符<code>tab</code>敏感。<code>pug</code>使用空格作为缩进符，当然用soft tab也可行。同一级标签需保证左对齐。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">div</span><br><span class="line">    p Hello, world!</span><br><span class="line">    p Hello, pug.</span><br></pre></td></tr></table></figure><p>渲染结果如下：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;div&gt;</span><br><span class="line">    &lt;p&gt;Hellow, world!&lt;/p&gt;</span><br><span class="line">    &lt;p&gt;Hello, pug.&lt;/p&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure><h3 id="注释"><a href="#注释" class="headerlink" title="注释#"></a>注释<a href="#2684449589">#</a></h3><p><code>pug</code>使用<code>//-</code>或<code>//</code>对代码进行注释，前者注释内容不出现在渲染后的<code>html</code>文件中，后者反之。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">//\- html中不包含此行</span><br><span class="line">// html中会包含此行</span><br></pre></td></tr></table></figure><h3 id="属性"><a href="#属性" class="headerlink" title="属性#"></a>属性<a href="#3652243989">#</a></h3><p><code>pug</code>将标签属性存放于括号<code>()</code>内，多个属性之间以逗号或空格分隔。此外，对于标签的<code>id</code>和<code>class</code>，<code>pug</code>使用<code>#</code>紧跟标签<code>id</code>,使用<code>.</code>紧跟标签<code>class</code>，可以同时设置多个<code>class</code>。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">h1#title Test title</span><br><span class="line">img#name.class1.class2(src\=&quot;/test.png&quot; alt=&quot;test&quot;)</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;h1 id=&quot;title&quot;\&gt;Test title&lt;/h1&gt;</span><br><span class="line">&lt;img id=&quot;name&quot; class\=&quot;class1 class2&quot; src=&quot;/test.png&quot; alt=&quot;test&quot;\&gt;</span><br></pre></td></tr></table></figure><h3 id="包含"><a href="#包含" class="headerlink" title="包含#"></a>包含<a href="#3817915792">#</a></h3><p>为了方便代码复用，<code>pug</code>提供了<code>include</code>包含功能，以下代码会将<code>_partial</code>目录下的<code>head.pug</code>文件内容包含到当前调用的位置。有点<code>C/C++</code>中内联函数的意思。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">doctype html</span><br><span class="line">html(lang\=&#x27;en&#x27;)</span><br><span class="line">    include \_partial/head.pug</span><br></pre></td></tr></table></figure><h3 id="继承"><a href="#继承" class="headerlink" title="继承#"></a>继承<a href="#1760707796">#</a></h3><p>下面是一个简单的<code>base</code>模板，通过<code>block</code>定义了页面头部<code>head</code>和内容<code>body</code>。块<code>block</code>有点类似<code>C/C++</code>的抽象函数，需要在继承者中完成定义，填充具体内容。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">//\- base.pug</span><br><span class="line">html</span><br><span class="line">    head</span><br><span class="line">        block title</span><br><span class="line">    body</span><br><span class="line">        block content</span><br></pre></td></tr></table></figure><p>以下文件使用<code>extends</code>继承以上模板，通过<code>block</code>覆盖或替换原有块<code>block</code>。当然，继承者也可以在原有基础上继续扩展。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">//\- index.pug</span><br><span class="line">extends base.pug</span><br><span class="line"></span><br><span class="line">block title</span><br><span class="line">    title &quot;Test title&quot;</span><br><span class="line"></span><br><span class="line">block content</span><br><span class="line">    h1 Hello world!</span><br><span class="line">    block article</span><br></pre></td></tr></table></figure><h3 id="定义变量"><a href="#定义变量" class="headerlink" title="定义变量#"></a>定义变量<a href="#596157311">#</a></h3><p><code>pug</code>中通过<code>- var name = value</code>的形式定义变量</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">\- var intData = 100</span><br><span class="line">- var boolData = false</span><br><span class="line">- var stringData = &#x27;Test&#x27;</span><br><span class="line">p.int\= intData</span><br><span class="line">p.bool\= boolData</span><br><span class="line">p.stringData\= stringData</span><br></pre></td></tr></table></figure><blockquote><p>需注意的是，在引用变量时，需要在引用位置加上<code>=</code>号，否则会默认将变量名当成普通字符串使用。</p></blockquote><p>如果想要将变量与其它字符串常量或是变量连接在一起，就不能用等号了，而是应该用<code>#&#123;&#125;</code>，该符号会对大括号内的变量进行求值和转义，最终得到渲染输出的内容。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">\- var girl = &#x27;Lily&#x27;</span><br><span class="line">- var boy = &#x27;Jack&#x27;</span><br><span class="line">p #&#123;girl&#125; is so beautiful!</span><br><span class="line">p And #&#123;boy&#125; is handsome.</span><br></pre></td></tr></table></figure><h3 id="条件结构"><a href="#条件结构" class="headerlink" title="条件结构#"></a>条件结构<a href="#1091456314">#</a></h3><p><code>pug</code>的条件语句与其它语言类似，均是如下这般：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">\- var A = &#123;value: &#x27;Test&#x27;&#125;</span><br><span class="line">\- var B = true</span><br><span class="line">if A.value</span><br><span class="line">    p\= A.value</span><br><span class="line">else if B</span><br><span class="line">    p\= B</span><br><span class="line">else</span><br><span class="line">    p nothing</span><br></pre></td></tr></table></figure><h3 id="迭代"><a href="#迭代" class="headerlink" title="迭代#"></a>迭代<a href="#2804751102">#</a></h3><p><code>pug</code>中使用<code>each</code>和<code>while</code>实现循环迭代，<code>each</code>可以返回当前所在项的索引值，默认从0开始计数。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">//\- each</span><br><span class="line">ol</span><br><span class="line">    each item in \[&#x27;Sun&#x27;, &#x27;Mon&#x27;, &#x27;Tus&#x27;, &#x27;Wen&#x27;, &#x27;Thu&#x27;, &#x27;Fri&#x27;, &#x27;Sat&#x27;\]</span><br><span class="line">        li\= item</span><br><span class="line"></span><br><span class="line">//\- get index of each</span><br><span class="line">- var week = \[&#x27;Sun&#x27;, &#x27;Mon&#x27;, &#x27;Tus&#x27;, &#x27;Wen&#x27;, &#x27;Thu&#x27;, &#x27;Fri&#x27;, &#x27;Sat&#x27;\]</span><br><span class="line">ol</span><br><span class="line">    each item, index in week</span><br><span class="line">        li\= index + &#x27;:&#x27; + item</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;ol&gt;</span><br><span class="line">  &lt;li&gt;Sun&lt;/li&gt;</span><br><span class="line">  &lt;li&gt;Mon&lt;/li&gt;</span><br><span class="line">  &lt;li&gt;Tus&lt;/li&gt;</span><br><span class="line">  &lt;li&gt;Wen&lt;/li&gt;</span><br><span class="line">  &lt;li&gt;Thu&lt;/li&gt;</span><br><span class="line">  &lt;li&gt;Fri&lt;/li&gt;</span><br><span class="line">  &lt;li&gt;Sat&lt;/li&gt;</span><br><span class="line">&lt;/ol&gt;</span><br><span class="line">&lt;ol&gt;</span><br><span class="line">  &lt;li&gt;0:Sun&lt;/li&gt;</span><br><span class="line">  &lt;li&gt;1:Mon&lt;/li&gt;</span><br><span class="line">  &lt;li&gt;2:Tus&lt;/li&gt;</span><br><span class="line">  &lt;li&gt;3:Wen&lt;/li&gt;</span><br><span class="line">  &lt;li&gt;4:Thu&lt;/li&gt;</span><br><span class="line">  &lt;li&gt;5:Fri&lt;/li&gt;</span><br><span class="line">  &lt;li&gt;6:Sat&lt;/li&gt;</span><br><span class="line">&lt;/ol&gt;</span><br></pre></td></tr></table></figure><p><code>while</code>调用方式如下：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">//\- while</span><br><span class="line">- var day = 1</span><br><span class="line">ul</span><br><span class="line">    while day &lt; 7</span><br><span class="line">        li\= day++</span><br></pre></td></tr></table></figure><h3 id="Minix"><a href="#Minix" class="headerlink" title="Minix#"></a>Minix<a href="#525420919">#</a></h3><p><code>mixin</code>名曰<strong>混入</strong>，类似其它编程语言中的<strong>函数</strong>，也是为了代码复用，可带参数或不带参数，定义方式如下：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mixin menu-item(href, name)</span><br><span class="line">    li</span><br><span class="line">        span.dot ●</span><br><span class="line">        a(href\=href)= name</span><br></pre></td></tr></table></figure><p>其中，<code>menu-item</code>为调用时所用名称，可认为是函数名，<code>href</code>及<code>name</code>是参数。同上<a href="#%E5%AE%9A%E4%B9%89%E5%8F%98%E9%87%8F">定义变量</a>所说，<code>a(href=href)= name</code>中第二个<code>=</code>是为了将后面的<code>name</code>当作参数来处理，而不是当作字符串”name”来处理。</p><p>调用<code>mixin</code>定义的代码块，需通过<code>+</code>号紧跟<code>mixin</code>名称及参数:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">+menu-item(&#x27;/Archives&#x27;,&#x27;Archives&#x27;)</span><br><span class="line">+menu-item(&#x27;/About&#x27;,&#x27;About&#x27;)</span><br></pre></td></tr></table></figure><p><code>mixin</code>之所以称为混入，是因为其语法不局限于函数调用，在<code>mixin</code>可以使用块<code>block</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">mixin print(post)</span><br><span class="line">    if block</span><br><span class="line">        block</span><br><span class="line">    else</span><br><span class="line">        p\= post</span><br><span class="line"></span><br><span class="line">+print(&quot;no block&quot;)</span><br><span class="line">+print(&quot;&quot;)</span><br><span class="line">    div.box</span><br><span class="line">        p this is the content of block</span><br></pre></td></tr></table></figure><p>↓</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;p&gt;no block&lt;/p&gt;</span><br><span class="line">&lt;div class\=&quot;box&quot;\&gt;&lt;p&gt;this is the content of block&lt;/p&gt;&lt;/div&gt;</span><br></pre></td></tr></table></figure><h3 id="JavaScript"><a href="#JavaScript" class="headerlink" title="JavaScript#"></a>JavaScript<a href="#1819458277">#</a></h3><p>注意以下<code>pug</code>语句中第一行的<code>.</code>号。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">script(type=&#x27;text/javascript&#x27;).</span><br><span class="line">    var data = &quot;Test&quot;</span><br><span class="line">    var enable = true</span><br><span class="line">    if enable</span><br><span class="line">        console.log(data)</span><br><span class="line">    else</span><br><span class="line">        console.log(&#x27;nothing&#x27;)</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type=&#x27;text/javascript&#x27;\&gt;</span><br><span class="line">    var data = &quot;Test&quot;</span><br><span class="line">    var enable = true</span><br><span class="line">    if enable</span><br><span class="line">        console.log(data)</span><br><span class="line">    else</span><br><span class="line">        console.log(&#x27;nothing&#x27;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><p>对于简单脚本，使用<code>pug</code>尚可，复杂的还是单独写到<code>.js</code>文件中，然后通过<code>pug</code>引用方便一些，引用方式如下：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">script(type=&#x27;text/javascript&#x27;, src=&#x27;/path/to/js&#x27;)</span><br><span class="line"></span><br><span class="line">//\- with hexo function url\_for</span><br><span class="line">script(type=&#x27;text/javascript&#x27;, src=url\_for(theme.js) + &#x27;/ready.js&#x27;)</span><br></pre></td></tr></table></figure><h3 id="hexo-相关"><a href="#hexo-相关" class="headerlink" title="hexo 相关#"></a>hexo 相关<a href="#3458073758">#</a></h3><p>在<code>hexo</code>主题中使用<code>pug</code>时，可以通过使用<code>hexo</code>提供的全局变量<code>config</code>，<code>theme</code>来分别调用博客根目录下<code>_config.yml</code>文件中的参数以及主题根目录下<code>_config.yml</code>文件中的参数。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">//\- blog config</span><br><span class="line">p= config.description</span><br><span class="line"></span><br><span class="line">//\- theme config</span><br><span class="line">p= theme.title</span><br></pre></td></tr></table></figure><p>当然，<code>pug</code>中可以直接使用<code>hexo</code>提供的其它全局变量及辅助函数，使用方法详见<code>hexo</code>的<a href="https://hexo.io/zh-cn/docs/variables">文档</a></p><h2 id="示例"><a href="#示例" class="headerlink" title="示例#"></a>示例<a href="#997824657">#</a></h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">//\- head.pug</span><br><span class="line">head</span><br><span class="line">    meta(http\-equiv=&#x27;content-type&#x27;, content=&#x27;text/html; charset=utf-8&#x27;)</span><br><span class="line">    meta(content\=&#x27;width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0&#x27;, name=&#x27;viewport&#x27;)</span><br><span class="line">    meta(content\=&#x27;yes&#x27;, name=&#x27;apple-mobile-web-app-capable&#x27;)</span><br><span class="line">    meta(content\=&#x27;black-translucent&#x27;, name=&#x27;apple-mobile-web-app-status-bar-style&#x27;)</span><br><span class="line">    meta(content\=&#x27;telephone=no&#x27;, name=&#x27;format-detection&#x27;)</span><br><span class="line">    meta(name\=&#x27;description&#x27;, content=config.description)</span><br><span class="line">    block title</span><br><span class="line">    link(rel\=&#x27;stylesheet&#x27;, type=&#x27;text/css&#x27;, href=url\_for(theme.css) + &#x27;/style.css&#x27; + &#x27;?v=&#x27; + theme.version)</span><br><span class="line">    link(rel\=&#x27;Shortcut Icon&#x27;, type=&#x27;image/x-icon&#x27;, href=url\_for(&#x27;favicon.png&#x27;))</span><br><span class="line">    script(type\=&#x27;text/javascript&#x27;, src=&#x27;//cdn.bootcss.com/jquery/3.3.1/jquery.min.js&#x27;)</span><br><span class="line">    block more</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">//\- base.pug</span><br><span class="line">doctype html</span><br><span class="line">html(lang\=&#x27;en&#x27;)</span><br><span class="line">    include \_partial/head.pug</span><br><span class="line">    block more</span><br><span class="line">        link(rel\=&#x27;stylesheet&#x27;, type=&#x27;text/css&#x27;, href=url\_for(theme.plugins) + &#x27;/prettify/doxy.css&#x27;)</span><br><span class="line">        script(type\=&#x27;text/javascript&#x27;, src=url\_for(theme.js) + &#x27;/ready.js&#x27; + &#x27;?v=&#x27; + theme.version, async)</span><br><span class="line">    </span><br><span class="line">    //\- body</span><br><span class="line">    body: #container.box</span><br><span class="line">        .h\-wrapper</span><br><span class="line">            include \_partial/nav-menu.pug</span><br><span class="line">        // article content</span><br><span class="line">        block content</span><br><span class="line"></span><br><span class="line">        include \_partial/footer.pug</span><br></pre></td></tr></table></figure><p>其中:</p><ul><li><code>theme.*</code>为主题配置文件<code>_config.yml</code>中的参数</li><li><code>url_for</code>为<code>hexo</code>提供的用于查找资源路径的函数</li></ul><h2 id="总结"><a href="#总结" class="headerlink" title="总结#"></a>总结<a href="#3332286707">#</a></h2><p><code>pug</code>提供了包含，继承，Mixin等多种方式用于代码复用，语法简洁易懂，除了初学时需花费一些时间学习各种标点符号的含义外，其它倒也没有太大困难。</p><p>当然啦，<code>pug</code>还有许多其它特性，但就我目前使用情况而言，以上这些便已足够。</p><h2 id="参考"><a href="#参考" class="headerlink" title="参考#"></a>参考<a href="#507967610">#</a></h2><ul><li><a href="https://pugjs.org/zh-cn/api/getting-started.html">pugjs.org&#x2F;zh-cn&#x2F;api&#x2F;g…</a></li><li><a href="https://hexo.io/zh-cn/docs/">hexo.io&#x2F;zh-cn&#x2F;docs&#x2F;</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> 编程 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>hello-word</title>
      <link href="/2024/09/19/hello-word/"/>
      <url>/2024/09/19/hello-word/</url>
      
        <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>]]></content>
      
      
      <categories>
          
          <category> 编程 </category>
          
      </categories>
      
      
    </entry>
    
    
  
  
</search>
